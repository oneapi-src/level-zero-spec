

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Introduction &mdash; Level Zero Specification  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script type="text/javascript" src="../_static/custom.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Core API" href="api.html" />
    <link rel="prev" title="Introduction" href="../tools/SYSMAN.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Level Zero Specification
          

          
          </a>

          
            
            
              <div class="version">
                0.91
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="INTRO.html">Overview</a></li>
</ul>
<p class="caption"><span class="caption-text">Core Programming Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="PROG.html">Core Programming Guide</a></li>
</ul>
<p class="caption"><span class="caption-text">Tools Programming Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tools/PROG.html">Initialization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/PROG.html#api-tracing">API Tracing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/PROG.html#metrics">Metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/PROG.html#program-instrumentation">Program Instrumentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/PROG.html#program-debug">Program Debug</a></li>
</ul>
<p class="caption"><span class="caption-text">Sysman Programming Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tools/SYSMAN.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/SYSMAN.html#high-level-overview">High-level overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/SYSMAN.html#interface-details">Interface details</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/SYSMAN.html#security">Security</a></li>
</ul>
<p class="caption"><span class="caption-text">SPIR-V Programming Guide</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="#common-properties">Common Properties</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#supported-spir-v-versions">Supported SPIR-V Versions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#extended-instruction-sets">Extended Instruction Sets</a></li>
<li class="toctree-l2"><a class="reference internal" href="#source-language-encoding">Source Language Encoding</a></li>
<li class="toctree-l2"><a class="reference internal" href="#numerical-type-formats">Numerical Type Formats</a></li>
<li class="toctree-l2"><a class="reference internal" href="#supported-types">Supported Types</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#basic-scalar-and-vector-types">Basic Scalar and Vector Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="#image-related-data-types">Image-Related Data Types</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#kernels">Kernels</a></li>
<li class="toctree-l2"><a class="reference internal" href="#kernel-return-types">Kernel Return Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="#kernel-arguments">Kernel Arguments</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#required-capabilities">Required Capabilities</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#spir-v-1-0">SPIR-V 1.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="#spir-v-1-1">SPIR-V 1.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="#spir-v-1-2">SPIR-V 1.2</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#validation-rules">Validation Rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="#extensions">Extensions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#spv-intel-subgroups"><code class="docutils literal notranslate"><span class="pre">SPV_INTEL_subgroups</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#notes-and-restrictions">Notes and Restrictions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#other-extensions-to-consider">Other Extensions to Consider:</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#numerical-compliance">Numerical Compliance</a></li>
<li class="toctree-l1"><a class="reference internal" href="#image-addressing-and-filtering">Image Addressing and Filtering</a></li>
</ul>
<p class="caption"><span class="caption-text">API Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api.html">Core API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/api.html">Tools API</a></li>
</ul>
<p class="caption"><span class="caption-text">Versions</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../versions.html">Latest Release</a></li>
<li class="toctree-l1"><a class="reference internal" href="../versions.html#previous-releases">Previous Releases</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Level Zero Specification</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    

    

  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="introduction">
<h1>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://www.khronos.org/registry/spir-v/">SPIR-V</a> is an open,
royalty-free, standard intermediate language capable of representing
parallel compute kernels. SPIR-V is adaptable to multiple execution
environments: a SPIR-V module is consumed by an execution environment,
as specified by a client API. This document describes the SPIR-V
execution environment for the ‘One API’ Level-Zero API. The SPIR-V
execution environment describes required support for some SPIR-V
capabilities, additional semantics for some SPIR-V instructions, and
additional validation rules that a SPIR-V binary module must adhere to
in order to be considered valid.</p>
<p>This document is written for compiler developers who are generating
SPIR-V modules intended to be consumed by the ‘One API’ Level-Zero API,
for implementors of the ‘One API’ Level-Zero API, and for software
developers who are using SPIR-V modules with the ‘One API’ Level-Zero
API.</p>
</div>
<div class="section" id="common-properties">
<h1>Common Properties<a class="headerlink" href="#common-properties" title="Permalink to this headline">¶</a></h1>
<p>This section describes common properties of all ‘One API’ Level-Zero
environments that consume SPIR-V modules.</p>
<p>A SPIR-V module is interpreted as a series of 32-bit words in host
endianness, with literal strings packed as described in the SPIR-V
specification. The first few words of the SPIR-V module must be a magic
number and a SPIR-V version number, as described in the SPIR-V
specification.</p>
<div class="section" id="supported-spir-v-versions">
<h2>Supported SPIR-V Versions<a class="headerlink" href="#supported-spir-v-versions" title="Permalink to this headline">¶</a></h2>
<p>The maximum SPIR-V version supported by a device is described by ::ze_device_kernel_properties_t.spirvVersionSupported.</p>
</div>
<div class="section" id="extended-instruction-sets">
<h2>Extended Instruction Sets<a class="headerlink" href="#extended-instruction-sets" title="Permalink to this headline">¶</a></h2>
<p>The <strong>OpenCL.std</strong> <a class="reference external" href="https://www.khronos.org/registry/spir-v/">extended instruction set for
OpenCL</a> is supported.</p>
</div>
<div class="section" id="source-language-encoding">
<h2>Source Language Encoding<a class="headerlink" href="#source-language-encoding" title="Permalink to this headline">¶</a></h2>
<p>The source language version is purely informational and has no semantic
meaning.</p>
</div>
<div class="section" id="numerical-type-formats">
<h2>Numerical Type Formats<a class="headerlink" href="#numerical-type-formats" title="Permalink to this headline">¶</a></h2>
<p>Floating-point types are represented and stored using
<a class="reference external" href="http://dx.doi.org/10.1109/IEEESTD.2008.4610935">IEEE-754</a> semantics.
All integer formats are represented and stored using 2’s-complement
format.</p>
</div>
<div class="section" id="supported-types">
<h2>Supported Types<a class="headerlink" href="#supported-types" title="Permalink to this headline">¶</a></h2>
<p>The following types are supported. Note that some types may require
additional capabilities, and may not be supported by all environments.</p>
<div class="section" id="basic-scalar-and-vector-types">
<h3>Basic Scalar and Vector Types<a class="headerlink" href="#basic-scalar-and-vector-types" title="Permalink to this headline">¶</a></h3>
<p><strong>OpTypeVoid</strong> is supported.</p>
<p>The following scalar types are supported:</p>
<ul class="simple">
<li><p><strong>OpTypeBool</strong></p></li>
<li><p><strong>OpTypeInt</strong>, with <em>Width</em> equal to 8, 16, 32, or 64, and with
<em>Signedness</em> equal to zero, indicating no signedness semantics.</p></li>
<li><p><strong>OpTypeFloat</strong>, with <em>Width</em> equal to 16, 32, or 64.</p></li>
</ul>
<p><strong>OpTypeVector</strong> vector types are supported. The vector <em>Component Type</em>
may be any of the scalar types described above. Supported vector
<em>Component Counts</em> are 2, 3, 4, 8, or 16.</p>
<p><strong>OpTypeArray</strong> array types are supported, <strong>OpTypeStruct</strong> struct types
are supported, <strong>OpTypeFunction</strong> functions are supported, and
<strong>OpTypePointer</strong> pointer types are supported.</p>
</div>
<div class="section" id="image-related-data-types">
<h3>Image-Related Data Types<a class="headerlink" href="#image-related-data-types" title="Permalink to this headline">¶</a></h3>
<p>The following table describes the supported <strong>OpTypeImage</strong> image types:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 14%" />
<col style="width: 18%" />
<col style="width: 47%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><em>Dim</em></p></th>
<th class="head"><p><em>Depth</em></p></th>
<th class="head"><p><em>Arrayed</em></p></th>
<th class="head"><p><strong>Description</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>1D</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>A 1D image.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>1D</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1</span></code></p></td>
<td><p>A 1D image array.</p></td>
</tr>
<tr class="row-even"><td><p><strong>2D</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>A 2D image.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>2D</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>A 2D depth image.</p></td>
</tr>
<tr class="row-even"><td><p><strong>2D</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1</span></code></p></td>
<td><p>A 2D image array.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>2D</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1</span></code></p></td>
<td><p>A 2D depth image array.</p></td>
</tr>
<tr class="row-even"><td><p><strong>3D</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>A 3D image.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Buffer</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>A 1D buffer image.</p></td>
</tr>
</tbody>
</table>
<p><strong>OpTypeSampler</strong> sampler typed are supported.</p>
</div>
</div>
<div class="section" id="kernels">
<h2>Kernels<a class="headerlink" href="#kernels" title="Permalink to this headline">¶</a></h2>
<p>An <strong>OpFunction</strong> in a SPIR-V module that is identified with
<strong>OpEntryPoint</strong> defines a kernel that may be launched using host API
interfaces.</p>
</div>
<div class="section" id="kernel-return-types">
<h2>Kernel Return Types<a class="headerlink" href="#kernel-return-types" title="Permalink to this headline">¶</a></h2>
<p>The <em>Result Type</em> for an <strong>OpFunction</strong> identified with <strong>OpEntryPoint</strong>
must be <strong>OpTypeVoid</strong>.</p>
</div>
<div class="section" id="kernel-arguments">
<h2>Kernel Arguments<a class="headerlink" href="#kernel-arguments" title="Permalink to this headline">¶</a></h2>
<p>An <strong>OpFunctionParameter</strong> for an <strong>OpFunction</strong> that is identified with
<strong>OpEntryPoint</strong> defines a kernel argument. Allowed types for kernel
arguments are:</p>
<ul class="simple">
<li><p><strong>OpTypeInt</strong></p></li>
<li><p><strong>OpTypeFloat</strong></p></li>
<li><p><strong>OpTypeStruct</strong></p></li>
<li><p><strong>OpTypeVector</strong></p></li>
<li><p><strong>OpTypePointer</strong></p></li>
<li><p><strong>OpTypeSampler</strong></p></li>
<li><p><strong>OpTypeImage</strong></p></li>
</ul>
<p>For <strong>OpTypeInt</strong> parameters, supported <em>Widths</em> are 8, 16, 32, and 64,
and must have no signedness semantics.</p>
<p>For <strong>OpTypeFloat</strong> parameters, supported <em>Widths</em> are 16 and 32.</p>
<p>For <strong>OpTypeStruct</strong> parameters, supported structure <em>Member Types</em> are:</p>
<ul class="simple">
<li><p><strong>OpTypeInt</strong></p></li>
<li><p><strong>OpTypeFloat</strong></p></li>
<li><p><strong>OpTypeStruct</strong></p></li>
<li><p><strong>OpTypeVector</strong></p></li>
<li><p><strong>OpTypePointer</strong></p></li>
</ul>
<p>For <strong>OpTypePointer</strong> parameters, supported <em>Storage Classes</em> are:</p>
<ul class="simple">
<li><p><strong>CrossWorkgroup</strong></p></li>
<li><p><strong>Workgroup</strong></p></li>
<li><p><strong>UniformConstant</strong></p></li>
</ul>
<p>Environments that support extensions or optional features may allow
additional types in an entry point’s parameter list.</p>
</div>
</div>
<div class="section" id="required-capabilities">
<h1>Required Capabilities<a class="headerlink" href="#required-capabilities" title="Permalink to this headline">¶</a></h1>
<div class="section" id="spir-v-1-0">
<h2>SPIR-V 1.0<a class="headerlink" href="#spir-v-1-0" title="Permalink to this headline">¶</a></h2>
<p>An environment that supports SPIR-V 1.0 must support SPIR-V 1.0 modules
that declare the following capabilities:</p>
<ul class="simple">
<li><p><strong>Addresses</strong></p></li>
<li><p><strong>Float16Buffer</strong></p></li>
<li><p><strong>Int64</strong></p></li>
<li><p><strong>Int16</strong></p></li>
<li><p><strong>Int8</strong></p></li>
<li><p><strong>Kernel</strong></p></li>
<li><p><strong>Linkage</strong></p></li>
<li><p><strong>Vector16</strong></p></li>
<li><p><strong>GenericPointer</strong></p></li>
<li><p><strong>Groups</strong></p></li>
<li><p><strong>ImageBasic</strong> (for devices supporting ::ze_device_image_properties_t.supported)</p></li>
<li><p><strong>Float16</strong> (for devices supporting ::ze_device_kernel_properties_t.fp16Supported)</p></li>
<li><p><strong>Float64</strong> (for devices supporting ::ze_device_kernel_properties_t.fp64Supported)</p></li>
<li><p><strong>Int64Atomics</strong> (for devices supporting ::ze_device_kernel_properties_t.int64AtomicsSupported)</p></li>
</ul>
<p>If the ‘One API’ environment supports the <strong>ImageBasic</strong> capability,
then the following capabilities must also be supported:</p>
<ul class="simple">
<li><p><strong>LiteralSampler</strong></p></li>
<li><p><strong>Sampled1D</strong></p></li>
<li><p><strong>Image1D</strong></p></li>
<li><p><strong>SampledBuffer</strong></p></li>
<li><p><strong>ImageBuffer</strong></p></li>
<li><p><strong>ImageReadWrite</strong></p></li>
</ul>
</div>
<div class="section" id="spir-v-1-1">
<h2>SPIR-V 1.1<a class="headerlink" href="#spir-v-1-1" title="Permalink to this headline">¶</a></h2>
<p>An environment supporting SPIR-V 1.1 must support SPIR-V 1.1 modules
that declare the capabilities required for SPIR-V 1.0 modules, above.</p>
<p>SPIR-V 1.1 does not add any new required capabilities.</p>
</div>
<div class="section" id="spir-v-1-2">
<h2>SPIR-V 1.2<a class="headerlink" href="#spir-v-1-2" title="Permalink to this headline">¶</a></h2>
<p>An environment supporting SPIR-V 1.2 must support SPIR-V 1.2 modules
that declare the capabilities required for SPIR-V 1.1 modules, above.</p>
<p>SPIR-V 1.2 does not add any new required capabilities.</p>
</div>
</div>
<div class="section" id="validation-rules">
<h1>Validation Rules<a class="headerlink" href="#validation-rules" title="Permalink to this headline">¶</a></h1>
<p>The following are a list of validation rules that apply to SPIR-V
modules executing in all ‘One API’ Level-Zero environments:</p>
<p>The <em>Execution Model</em> declared in <strong>OpEntryPoint</strong> must be <strong>Kernel</strong>.</p>
<p>The <em>Addressing Model</em> declared in <strong>OpMemoryModel</strong> must
<strong>Physical64</strong>, indicating that device pointers are 64-bits.</p>
<p>The <em>Memory Model</em> declared in <strong>OpMemoryModel</strong> must be <strong>OpenCL</strong>.</p>
<p>For all <strong>OpTypeInt</strong> integer type-declaration instructions:</p>
<ul class="simple">
<li><p><em>Signedness</em> must be 0, indicating no signedness semantics.</p></li>
</ul>
<p>For all <strong>OpTypeImage</strong> type-declaration instructions: * <em>Sampled Type</em>
must be <strong>OpTypeVoid</strong>. * <em>Sampled</em> must be 0, indicating that the
image usage will be known at run time, not at compile time. * <em>MS</em> must
be 0, indicating single-sampled content. * <em>Arrayed</em> may only be set to
1, indicating arrayed content, when <em>Dim</em> is set to <strong>1D</strong> or <strong>2D</strong>. *
<em>Image Format</em> must be <strong>Unknown</strong>, indicating that the image does not
have a specified format. * The optional image <em>Access Qualifier</em> must
be present.</p>
<p>The image write instruction <strong>OpImageWrite</strong> must not include any
optional <em>Image Operands</em>.</p>
<p>The image read instructions <strong>OpImageRead</strong> and
<strong>OpImageSampleExplicitLod</strong> must not include the optional <em>Image
Operand</em> <strong>ConstOffset</strong>.</p>
<p>For all <em>Atomic Instructions</em>:</p>
<ul class="simple">
<li><p>32-bit integer types are supported for the <em>Result Type</em> and/or type
of <em>Value</em>. 64-bit integer types are optionally supported for the
<em>Result Type</em> and/or type of <em>Value</em> for devices supporting
::ze_device_kernel_properties_t.int64AtomicsSupported.</p></li>
<li><p>The <em>Pointer</em> operand must be a pointer to the <strong>Function</strong>,
<strong>Workgroup</strong>, <strong>CrossWorkGroup</strong>, or <strong>Generic</strong> <em>Storage Classes</em>.</p></li>
</ul>
<p>Recursion is not supported. The static function call graph for an entry
point must not contain cycles.</p>
<p>Whether irreducible control flow is legal is implementation defined.</p>
<p>For the instructions <strong>OpGroupAsyncCopy</strong> and <strong>OpGroupWaitEvents</strong>,
<em>Scope</em> for <em>Execution</em> must be:</p>
<ul class="simple">
<li><p><strong>Workgroup</strong></p></li>
</ul>
<p>For all other instructions, <em>Scope</em> for <em>Execution</em> must be one of:</p>
<ul class="simple">
<li><p><strong>Workgroup</strong></p></li>
<li><p><strong>Subgroup</strong></p></li>
</ul>
<p><em>Scope</em> for <em>Memory</em> must be one of:</p>
<ul class="simple">
<li><p><strong>CrossDevice</strong></p></li>
<li><p><strong>Device</strong></p></li>
<li><p><strong>Workgroup</strong></p></li>
<li><p><strong>Invocation</strong></p></li>
<li><p><strong>Subgroup</strong></p></li>
</ul>
</div>
<div class="section" id="extensions">
<h1>Extensions<a class="headerlink" href="#extensions" title="Permalink to this headline">¶</a></h1>
<div class="section" id="spv-intel-subgroups">
<h2><code class="docutils literal notranslate"><span class="pre">SPV_INTEL_subgroups</span></code><a class="headerlink" href="#spv-intel-subgroups" title="Permalink to this headline">¶</a></h2>
<p>‘One API’ Level-Zero API environments must accept SPIR-V modules that
declare use of the <code class="docutils literal notranslate"><span class="pre">SPV_INTEL_subgroups</span></code> extension via
<strong>OpExtension</strong>.</p>
<p>When use of the <code class="docutils literal notranslate"><span class="pre">SPV_INTEL_subgroups</span></code> extension is declared in the
module via <strong>OpExtension</strong>, the environment must accept modules that
declare the following SPIR-V capabilities:</p>
<ul class="simple">
<li><p><strong>SubgroupShuffleINTEL</strong></p></li>
<li><p><strong>SubgroupBufferBlockIOINTEL</strong></p></li>
<li><p><strong>SubgroupImageBlockIOINTEL</strong></p></li>
</ul>
<p>The environment must accept the following types for <em>Data</em> for the
<strong>SubgroupShuffleINTEL</strong> instructions:</p>
<ul class="simple">
<li><p>Scalars and <strong>OpTypeVectors</strong> with 2, 4, 8, or 16 <em>Component Count</em>
components of the following <em>Component Type</em> types:</p>
<ul>
<li><p><strong>OpTypeFloat</strong> with a <em>Width</em> of 32 bits (<code class="docutils literal notranslate"><span class="pre">float</span></code>)</p></li>
<li><p>TBD: char types?</p></li>
<li><p><strong>OpTypeInt</strong> with a <em>Width</em> of 16 bits and <em>Signedness</em> of 0
(<code class="docutils literal notranslate"><span class="pre">short</span></code> and <code class="docutils literal notranslate"><span class="pre">ushort</span></code>)</p></li>
<li><p><strong>OpTypeInt</strong> with a <em>Width</em> of 32 bits and <em>Signedness</em> of 0
(<code class="docutils literal notranslate"><span class="pre">int</span></code> and <code class="docutils literal notranslate"><span class="pre">uint</span></code>)</p></li>
</ul>
</li>
<li><p>Scalars of <strong>OpTypeInt</strong> with a <em>Width</em> of 64 bits and <em>Signedness</em>
of 0 (<code class="docutils literal notranslate"><span class="pre">long</span></code> and <code class="docutils literal notranslate"><span class="pre">ulong</span></code>)</p>
<ul>
<li><p>TBD: vectors of long types?</p></li>
</ul>
</li>
</ul>
<p>Additionally, if the <strong>Float16</strong> capability is declared and supported:</p>
<ul class="simple">
<li><p>Scalars of <strong>OpTypeFloat</strong> with a <em>Width</em> of 16 bits (<code class="docutils literal notranslate"><span class="pre">half</span></code>)</p></li>
</ul>
<p>Additionally, if the <strong>Float64</strong> capability is declared and supported:</p>
<ul class="simple">
<li><p>Scalars of <strong>OpTypeFloat</strong> with a <em>Width</em> of 64 bits (<code class="docutils literal notranslate"><span class="pre">double</span></code>)</p></li>
</ul>
<p>The environment must accept the following types for <em>Result</em> and <em>Data</em>
for the <strong>SubgroupBufferBlockIOINTEL</strong> and <strong>SubgroupImageBlockIOINTEL</strong>
instructions:</p>
<ul class="simple">
<li><p>Scalars and <strong>OpTypeVectors</strong> with 2, 4, or 8 <em>Component Count</em>
components of the following <em>Component Type</em> types:</p>
<ul>
<li><p><strong>OpTypeInt</strong> with a <em>Width</em> of 32 bits and <em>Signedness</em> of 0
(<code class="docutils literal notranslate"><span class="pre">int</span></code> and <code class="docutils literal notranslate"><span class="pre">uint</span></code>)</p></li>
<li><p><strong>OpTypeInt</strong> with a <em>Width</em> of 16 bits and <em>Signedness</em> of 0
(<code class="docutils literal notranslate"><span class="pre">short</span></code> and <code class="docutils literal notranslate"><span class="pre">ushort</span></code>)</p></li>
</ul>
</li>
</ul>
<p>For <em>Ptr</em>, valid <em>Storage Classes</em> are:</p>
<ul class="simple">
<li><p><strong>CrossWorkGroup</strong> (<code class="docutils literal notranslate"><span class="pre">global</span></code>)</p></li>
</ul>
<p>For <em>Image</em>:</p>
<ul class="simple">
<li><p><em>Dim</em> must be <em>2D</em></p></li>
<li><p><em>Depth</em> must be 0 (not a depth image)</p></li>
<li><p><em>Arrayed</em> must be 0 (non-arrayed content)</p></li>
<li><p><em>MS</em> must be 0 (single-sampled content)</p></li>
</ul>
<p>For <em>Coordinate</em>, the following types are supported:</p>
<ul class="simple">
<li><p><strong>OpTypeVectors</strong> with two <em>Component Count</em> components of <em>Component
Type</em> <strong>OpTypeInt</strong> with a <em>Width</em> of 32 bits and <em>Signedness</em> of 0
(<code class="docutils literal notranslate"><span class="pre">int2</span></code>)</p></li>
</ul>
<div class="section" id="notes-and-restrictions">
<h3>Notes and Restrictions<a class="headerlink" href="#notes-and-restrictions" title="Permalink to this headline">¶</a></h3>
<p>The <strong>SubgroupShuffleINTEL</strong> instructions may be placed within
non-uniform control flow and hence do not have to be encountered by all
invocations in the subgroup, however <em>Data</em> may only be shuffled among
invocations encountering the <strong>SubgroupShuffleINTEL</strong> instruction.
Shuffling <em>Data</em> from an invocation that does not encounter the
<strong>SubgroupShuffleINTEL</strong> instruction will produce undefined results.</p>
<p>There is no defined behavior for out-of-range shuffle indices for the
<strong>SubgroupShuffleINTEL</strong> instructions.</p>
<p>The <strong>SubgroupBufferBlockIOINTEL</strong> and <strong>SubgroupImageBlockIOINTEL</strong>
instructions are only guaranteed to work correctly if placed strictly
within uniform control flow within the subgroup. This ensures that if
any invocation executes it, all invocations will execute it. If placed
elsewhere, behavior is undefined.</p>
<p>There is no defined out-of-range behavior for the
<strong>SubgroupBufferBlockIOINTEL</strong> instructions.</p>
<p>The <strong>SubgroupImageBlockIOINTEL</strong> instructions do support bounds
checking, however they bounds-check to the image width in units of
<code class="docutils literal notranslate"><span class="pre">uints</span></code>, not in units of image elements. This means:</p>
<ul class="simple">
<li><p>If the image has an <em>Image Format</em> size equal to the size of a
<code class="docutils literal notranslate"><span class="pre">uint</span></code> (four bytes, for example <strong>Rgba8</strong>), the image will be
correctly bounds-checked. In this case, out-of-bounds reads will
return the edge image element (the equivalent of <strong>ClampToEdge</strong>),
and out-of-bounds writes will be ignored.</p></li>
<li><p>If the image has an <em>Image Format</em> size less than the size of a
<code class="docutils literal notranslate"><span class="pre">uint</span></code> (such as <strong>R8</strong>), the entire image is addressable, however
bounds checking will occur too late. For this reason, extra care
should be taken to avoid out-of-bounds reads and writes, since
out-of-bounds reads may return invalid data and out-of-bounds writes
may corrupt other images or buffers unpredictably.</p></li>
</ul>
<p>The following restrictions apply to the <strong>SubgroupBufferBlockIOINTEL</strong>
instructions:</p>
<ul class="simple">
<li><p>The pointer <em>Ptr</em> must be 32-bit (4-byte) aligned for reads, and must
be 128-bit (16-byte) aligned for writes.</p></li>
</ul>
<p>The following restrictions apply to the <strong>SubgroupImageBlockIOINTEL</strong>
instructions:</p>
<ul class="simple">
<li><p>The behavior of the <strong>SubgroupImageBlockIOINTEL</strong> instructions is
undefined for images with an element size greater than four bytes
(such as <strong>Rgba32f</strong>).</p></li>
</ul>
<p>The following restrictions apply to the
<strong>OpSubgroupImageBlockWriteINTEL</strong> instruction:</p>
<ul class="simple">
<li><p>Unlike the image block read instruction, which may read from any
arbitrary byte offset, the x-component of the byte coordinate for the
image block write instruction must be a multiple of four; in other
words, the write must begin at a 32-bit boundary. There is no
restriction on the y-component of the coordinate.</p></li>
</ul>
</div>
</div>
<div class="section" id="other-extensions-to-consider">
<h2>Other Extensions to Consider:<a class="headerlink" href="#other-extensions-to-consider" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="http://htmlpreview.github.io/?https://github.com/KhronosGroup/SPIRV-Registry/blob/master/extensions/INTEL/SPV_INTEL_media_block_io.html">SPV_INTEL_media_block_io</a>
/
<a class="reference external" href="https://www.khronos.org/registry/OpenCL/extensions/intel/cl_intel_spirv_media_block_io.html">cl_intel_spirv_media_block_io</a>?</p></li>
</ul>
</div>
</div>
<div class="section" id="numerical-compliance">
<h1>Numerical Compliance<a class="headerlink" href="#numerical-compliance" title="Permalink to this headline">¶</a></h1>
<p>The ‘One API’ Level-Zero environment will meet or exceed the numerical
compliance requirements defined in the OpenCL SPIR-V Environment
Specification. See: <a class="reference external" href="https://www.khronos.org/registry/OpenCL/specs/2.2/html/OpenCL_Env.html#numerical_compliance">Numerical
Compliance</a>.</p>
</div>
<div class="section" id="image-addressing-and-filtering">
<h1>Image Addressing and Filtering<a class="headerlink" href="#image-addressing-and-filtering" title="Permalink to this headline">¶</a></h1>
<p>The ‘One API’ Level-Zero environment image addressing and filtering
behavior is compatible with the behavior defined in the OpenCL SPIR-V
Environment Specification. See: <a class="reference external" href="https://www.khronos.org/registry/OpenCL/specs/2.2/html/OpenCL_Env.html#image_addressing_and_filtering">Image Addressing and
Filtering</a>.</p>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="api.html" class="btn btn-neutral float-right" title="Core API" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../tools/SYSMAN.html" class="btn btn-neutral float-left" title="Introduction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Intel

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>